  - name: Initialize a new dict for the cleared credentials 
    set_fact:
      target_credential: {}
  - name: Extract credential dict from the full list 
    set_fact: 
      raw_credential: "{{all_credentials.json.results | selectattr('id' , 'equalto', mycred)}}"
    
  # - name: display raw credential
  #   debug:
  #     var: raw_credential
  - name: Create a temporary dictionary for target credential 
    set_fact:
      target_credential:
        name: "{{raw_credential.name}}"
        description: "{{raw_credential.description | default('Imported automatically')}}"
        credential_type: "{{raw_credential.summary_fields.credential_type.name}}"
        inputs: "{{raw_credential.inputs | default({}) | combine(unencrypted_inputs)}}"
    vars:
      unencrypted_inputs: "{{ dict(credentials_unprotected[mycred]) }}"
  - name: Show the credential to be created 
    debug:
      var: target_credential